<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="images/favicon.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flight Delay Compensation | Quaerens</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .content-box {
      max-width: 600px;
      margin: 0 auto;
      padding: 2rem;
      background: #f9fafb;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
    .goog-te-banner-frame.skiptranslate,
  .goog-logo-link,
  .goog-te-gadget {
    display: none !important;
  }
  body {
    top: 0px !important;
  }
    form label {
      display: block;
      margin-top: 1rem;
      font-weight: 600;
    }
    form input, form select {
      width: 100%;
      padding: 0.6rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-top: 0.5rem;
    }
  </style>
  <script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({
        pageLanguage: 'en',
        includedLanguages: 'en,es,fr,de,nl,it',
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE
      }, 'google_translate_element');
    }
  </script>
  <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
  <script>
    function setLanguage(lang) {
      var newLang = '/auto/' + lang;
      document.cookie = 'googtrans=' + newLang + '; path=/';
      document.cookie = 'googtrans=' + newLang + '; domain=' + window.location.hostname + '; path=/';
      location.reload();
    }
  </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  </head>

<body class="bg-gray-50 text-gray-800">
  <div id="google_translate_element" style="display: none;"></div>
  <!-- Header -->
  <header class="bg-white shadow">
    <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
      <a href="/">
        <img src="images/quaerens-logo.png" alt="Quaerens Logo" class="h-20 w-auto">
      </a>
      <nav>
        <a href="/" class="text-gray-700 hover:text-blue-600 font-medium">More claims</a>
      </nav>
      
    </div>
  </header>

<!-- Hero Section -->
<section class="relative w-full overflow-hidden">
  <img src="images/hero-flight2.jpg" alt="Free Legal Help Banner"
       class="w-full h-auto object-cover object-center" loading="eager" fetchpriority="high" />
</section>

  <!-- Claim Calculator -->
  <section id="calculator" class="py-16 bg-white">
  <div class="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-2 gap-8 items-start">

    <!-- Left: Legal Info -->
    <div class="bg-blue-50 rounded-xl p-6 shadow-md" data-aos="fade-up">
      <h2 class="text-xl font-bold mb-4 text-blue-800">Why You’re Entitled to Compensation</h2>
      <p class="text-gray-700 mb-3">
        Under <strong>EU Regulation 261/2004</strong>, you can claim up to <strong>€600</strong> if your flight was delayed,
        cancelled, or overbooked — and the airline was at fault. This includes technical issues, crew shortages, and more.
      </p>
      <p class="text-gray-600">
        If your flight arrived more than 3 hours late, and it wasn’t due to extraordinary circumstances (like extreme weather),
        you may have a valid claim. Our experts handle the process — <strong>no win, no fee</strong>.
      </p>
      <hr class="my-4">
      <h3 class="text-xl font-bold text-blue-800 mb-2">Why should you choose us?</h3>
      <ul class="list-disc list-inside text-gray-700 space-y-2">
        <li>We prepare and send your legal claim letter to the airline — at no cost.</li>
        <li>No fees. No waiting lists. No hidden catches.</li>
        <li>Save hours of your time — we’ve automated the process for you.</li>
        <li>Just enter your flight details and relax.</li>
        <li>Did I forget to mention that this service is FREE!</li>
        <li>Support our work with an optional donation if you’re happy.</li>
      </ul>
    </div>

    <!-- Right: Calculator -->
    <div class="bg-white rounded-xl p-6 shadow-md content-box" data-aos="fade-up">
      <h2>✈️ Check Your Flight Delay Compensation</h2>
      <p>Enter your flight details to see if you’re entitled to compensation under EU261.</p>
      <form id="compensation-form">
        <label for="departure">Departure Airport</label>
        <input list="airports" id="departure" placeholder="e.g. Amsterdam AMS" required>

        <label for="arrival">Arrival Airport</label>
        <input list="airports" id="arrival" placeholder="e.g. Malaga AGP" required>

        <label for="delay">Delay Duration</label>
        <select id="delay" required>
          <option value="">Select Delay Duration</option>
          <option value="2">Less than 3 hours</option>
          <option value="3">3 to 4 hours</option>
          <option value="4">More than 4 hours</option>
        </select>

        <button type="submit"
                style="margin-top: 1.5rem; padding: 0.75rem 1.5rem; background: #2563eb; color: white; border: none; border-radius: 8px; font-weight: 600; font-size: 1rem; cursor: pointer;">
          Check Compensation
        </button>
      </form>

      <div id="compensation-result" style="margin-top: 1.5rem; font-size: 1.2rem; font-weight: 500;"></div>

      <datalist id="airports"></datalist>
    </div>

  </div>
</section>

<div class="mt-10 bg-white border border-gray-200 rounded-xl p-6 shadow-md">

  <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 items-center text-center">

    <!-- News Item 1 -->
    <div>
      <img src="/images/logo-skynews.png" alt="Sky News" class="mx-auto h-10 mb-2">
      <p class="text-sm text-gray-700">“Finally, a flight claim service that’s 100% free.”</p>
    </div>

    <!-- News Item 2 -->
    <div>
      <img src="/images/logo-travelweekly.png" alt="Travel Weekly" class="mx-auto h-10 mb-2">
      <p class="text-sm text-gray-700">“No lawyers. No fees. Just fast, fair help for delayed flyers.”</p>
    </div>

    <!-- News Item 3 -->
    <div>
      <img src="/images/logo-euconsumerwatch.png" alt="EU Consumer Watch" class="mx-auto h-10 mb-2">
      <p class="text-sm text-gray-700">“EC261 letters in minutes – sent to the airline for you.”</p>
    </div>

  </div>
</div>

<!-- EC261 Claim Letter Generator Section (Updated) -->
<section class="bg-blue-50 pt-0">
  <!-- Banner Image -->
  <div class="w-full">
    <img src="images/hero-flight3.png" alt="Generate Your Free EC261 Claim Letter"
         class="w-full h-[500px] object-cover object-center" />
  </div>

  <!-- White form container overlapping the banner slightly -->
  <div class="max-w-3xl mx-auto px-4 bg-white p-8 rounded-xl shadow-md mt-[-4rem] relative z-10">
    <div class="mb-6 bg-yellow-300 text-blue-900 text-center px-6 py-5 rounded-xl shadow-lg border-2 border-yellow-500">
      <h2 class="text-3xl font-extrabold uppercase tracking-wide">
        Generate Your Free EC261 Claim Letter
      </h2>
      <p class="text-lg font-semibold mt-1">
        No lawyers, no fees — just fill in your flight details!
      </p>
    </div>

    <p class="text-gray-700 text-center mb-6">Fill in your flight and contact details to get a free compensation claim letter (PDF or email). No lawyer needed.</p>

    <form id="claim-letter-form" class="space-y-6">

      <p class="text-gray-700">Fill in your flight and contact details to get a free compensation claim letter (PDF or email). No lawyer needed.</p>
    
      <div>
        <label class="font-semibold">Full Name</label>
        <input type="text" id="fullName" class="w-full border p-2 rounded" required>
      </div>
    
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="font-semibold">Flight Number</label>
          <input type="text" id="flightNumber" class="w-full border p-2 rounded" required>
        </div>
        <div>
          <label class="font-semibold">Booking Reference</label>
          <input type="text" id="bookingRef" class="w-full border p-2 rounded" required>
        </div>
      </div>
    
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="font-semibold">Preferred Payment Method (e.g. IBAN, PayPal)</label>
          <input type="text" id="iban" class="w-full border p-2 rounded" required>
        </div>
        <div>
          <label class="font-semibold">Flight Date</label>
          <input type="date" id="flightDate" class="w-full border p-2 rounded" required>
        </div>
      </div>
    
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="font-semibold">Departure Airport</label>
          <input type="text" id="depAirport" list="airports" class="w-full border p-2 rounded" required>
        </div>
        <div>
          <label class="font-semibold">Arrival Airport</label>
          <input type="text" id="arrAirport" list="airports" class="w-full border p-2 rounded" required>
        </div>
      </div>
    
      <div>
        <label class="font-semibold">Airline</label>
        <input type="text" id="airline" list="airlines" class="w-full border p-2 rounded" required>
        <div id="airlineLogoPreview" class="text-center mt-2"></div>
      </div>
    
      <div>
        <label class="font-semibold">Flight Issue</label>
        <select id="reason" class="w-full border p-2 rounded" required>
          <option value="">Select one</option>
          <option value="Delayed over 3 hours">Delayed over 3 hours</option>
          <option value="Cancelled flight">Cancelled flight</option>
          <option value="Denied boarding">Denied boarding</option>
          <option value="Missed connection">Missed connection</option>
        </select>
      </div>
    
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="font-semibold">Flight Distance</label>
          <select id="distance" class="w-full border p-2 rounded" required>
            <option value="">Select distance</option>
            <option value="short">Under 1,500 km</option>
            <option value="medium">1,500–3,500 km</option>
            <option value="long">Over 3,500 km</option>
          </select>
        </div>
        <div>
          <label class="font-semibold">Delay Duration</label>
          <select id="delayDuration" class="w-full border p-2 rounded" required>
            <option value="">Select duration</option>
            <option value="under3">Under 3 hours</option>
            <option value="3to4">3–4 hours</option>
            <option value="over4">Over 4 hours</option>
          </select>
        </div>
      </div>
    
      <div>
        <label class="font-semibold">Preferred Language</label>
        <select id="language" class="w-full border p-2 rounded" required>
          <option value="en">English</option>
          <option value="de">German</option>
          <option value="fr">French</option>
          <option value="es">Spanish</option>
          <option value="nl">Dutch</option>
          <option value="it">Italian</option>
          <option value="el">Greek</option>
          <option value="sv">Swedish</option>
          <option value="no">Norwegian</option>
          <option value="da">Danish</option>
          <option value="fi">Finnish</option>
        </select>
      </div>
    
      <div>
        <label class="font-semibold">Email Address</label>
        <input type="email" id="email" class="w-full border p-2 rounded" required>
      </div>
    
      <div class="mt-4">
        <label class="font-semibold">Would you like us to handle it for you?</label>
        <select id="handleOption" class="w-full border p-2 rounded">
          <option value="pdf">No thanks – just give me the PDF letter</option>
          <option value="email">Email me the letter</option>
          <option value="quaerens">Let Quaerens handle the claim for me (no win, no fee)</option>
        </select>
      </div>
    
      <div class="mt-4">
        <label class="font-semibold">Would you like to donate?</label>
        <select id="donation" class="w-full border p-2 rounded">
          <option value="none">No donation</option>
          <option value="quaerens">Yes — support Quaerens' free services</option>
          <option value="charity">Yes — donate to a selected charity</option>
          <option value="split">Split between Quaerens and charity</option>
        </select>
      </div>
    
      <div>
        <label class="font-semibold">Upload Boarding Pass or Document (optional)</label>
        <input type="file" id="fileUpload" class="w-full border p-2 rounded">
      </div>
    
      <button type="submit" class="w-full bg-blue-600 text-white p-3 rounded font-semibold hover:bg-blue-700 transition">
        Generate My Claim Letter
      </button>
    
      <div id="claim-letter-result" class="hidden text-green-600 mt-4 font-semibold">
        ✅ Your letter is being prepared...
      </div>
    
    </form>    

<!-- Legal Explanation -->
  <section class="bg-gray-50 py-16">
    <div class="max-w-6xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-6 mb-16 text-center">
      <div class="bg-white rounded-xl shadow-md p-6 border border-gray-200" data-aos="fade-up">
        <h3 class="text-lg font-bold text-blue-700 mb-2">USE A LAWYER</h3>
        <ul class="text-gray-700 text-sm list-disc list-inside text-left">
          <li>Higher Fees (£50 to £500, + Hearing Fees)</li>
          <li>Risk of losing money</li>
          <li>Hours of your time lost</li>
          <li>The result unknown</li>
        </ul>
      </div>
      <div class="bg-white rounded-xl shadow-md p-6 border-4 border-blue-600" data-aos="fade-up" data-aos-delay="100">
        <h3 class="text-lg font-bold text-blue-700 mb-2">USE OUR FREE SERVICE</h3>
        <ul class="text-gray-700 text-sm list-disc list-inside text-left">
          <li>No cost, no risk – ever</li>
          <li>Instant downloadable claim letter</li>
          <li>We can send the email for you</li>
          <li>Fast – no waiting lists</li>   
          <li>Thousands Helped Already</li>
          <li>Option to donate if you wish</li>
        </ul>
      </div>
      <div class="bg-white rounded-xl shadow-md p-6 border border-gray-200" data-aos="fade-up" data-aos-delay="200">
        <h3 class="text-lg font-bold text-blue-700 mb-2">LET QUAERENS HANDLE IT</h3>
        <ul class="text-gray-700 text-sm list-disc list-inside text-left">
          <li>We do everything — start to finish</li>
          <li>No waiting list — act immediately</li>
          <li>Send the letter & follow up with the airline</li>
          <li>100% free — no commission</li>
          <li>Optional donation if happy with our help</li>
        </ul>
      </div>
    
    <div class="bg-white rounded-xl shadow-md p-6 border border-gray-200" data-aos="fade-up" data-aos-delay="200">
      <h3 class="text-lg font-bold text-blue-700 mb-2">LAWS AND REGULATIONS</h3>
      <p class="text-gray-700 text-sm">
        The amount of compensation you are entitled to depends on distance and delay time, fixed by the EU and the same for all airlines.
      </p>
      <div class="mt-4 text-sm text-left">
        <table class="w-full border text-gray-800 text-sm">
          <thead>
            <tr>
              <th class="border px-2 py-1">Flight Distance</th>
              <th class="border px-2 py-1">Delay</th>
              <th class="border px-2 py-1">Compensation</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="border px-2 py-1">&lt; 1,500 km</td>
              <td class="border px-2 py-1">&gt; 3 Hours</td>
              <td class="border px-2 py-1">€250</td>
            </tr>
            <tr>
              <td class="border px-2 py-1">1,500 – 3,500 km</td>
              <td class="border px-2 py-1">&gt; 3 Hours</td>
              <td class="border px-2 py-1">€400</td>
            </tr>
            <tr>
              <td class="border px-2 py-1">&gt; 3,500 km</td>
              <td class="border px-2 py-1">3–4 Hours</td>
              <td class="border px-2 py-1">€300</td>
            </tr>
            <tr>
              <td class="border px-2 py-1">&gt; 3,500 km</td>
              <td class="border px-2 py-1">&gt; 4 Hours</td>
              <td class="border px-2 py-1">€600</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Box 2: YOUR RIGHTS UNDER EC 261 -->
  <div class="bg-white rounded-xl shadow-md p-6 border border-gray-200" data-aos="fade-up" data-aos-delay="300">
    <h3 class="text-lg font-bold text-blue-700 mb-2">YOUR RIGHTS UNDER EC 261</h3>
    <ul class="text-gray-700 text-sm list-disc list-inside space-y-1">
      <li>If your flight is delayed more than 3 hours, you may claim compensation of €250 to €600.</li>
      <li>Cancelled flights, denied boarding, and missed connections are also covered.</li>
      <li>The airline must be responsible (e.g., technical fault or crew issue).</li>
      <li>You can claim for flights up to 3 years ago depending on your country.</li>
      <li>
        <button onclick="document.getElementById('faqModal').classList.remove('hidden')" class="text-blue-600 underline">
          Full summary – Frequently Asked Questions (FAQ)
        </button>
      </li>
    </ul>
  </div>
</div>
  
  <!-- FAQ Modal -->
  <div id="faqModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
    <div class="bg-white max-w-3xl max-h-[90vh] overflow-y-auto p-6 rounded-xl shadow-lg relative">
      <button onclick="document.getElementById('faqModal').classList.add('hidden')" class="absolute top-2 right-2 text-xl font-bold">&times;</button>
      <h3 class="text-xl font-semibold mb-4">Flight Delay & Cancellation Compensation – FAQ</h3>
      <div class="space-y-4 text-sm leading-relaxed">
        <p><strong>What is EC Regulation 261/2004?</strong><br>
        A European Union law that entitles airline passengers to compensation for long delays, cancellations, and denied boarding.</p>
  
        <p><strong>Who is eligible for compensation?</strong><br>
        Passengers delayed 3+ hours, cancelled within 14 days, or denied boarding due to the airline’s fault.</p>
  
        <p><strong>How far back can I claim?</strong><br>
        Up to 6 years in the UK, 3 years in most EU countries.</p>
  
        <p><strong>What are the compensation amounts?</strong><br>
        - €250 for flights under 1,500 km<br>
        - €400 for 1,500–3,500 km<br>
        - €600 for over 3,500 km (4+ hours delay)</p>
  
        <p><strong>Can I claim for a short flight (e.g. 100 miles)?</strong><br>
        Yes, if arrival delay is 3+ hours and it’s the airline’s fault, you may still claim €250.</p>
  
        <p><strong>What counts as 'extraordinary circumstances'?</strong><br>
        Bad weather, strikes, air traffic control issues — but technical faults and crew issues usually qualify.</p>
  
        <p><strong>Do non-EU airlines count?</strong><br>
        Yes, if departing from the EU/UK or arriving on an EU/UK airline.</p>
  
        <p><strong>Who pays the compensation?</strong><br>
        The airline – not the travel agent or booking site.</p>
  
        <p><strong>What if I got a refund or voucher?</strong><br>
        You can still claim compensation in addition to other remedies.</p>
  
        <p><strong>Will I be notified if the claim is accepted?</strong><br>
        If you use Quaerens Ltd and provide a signed LoA, the airline will usually notify us directly.</p>
  
        <p><strong>How much does Quaerens charge?</strong><br>
        25% of recovered compensation, including VAT – no-win, no-fee.</p>
  
        <p><strong>How long does it take?</strong><br>
        2–4 weeks for a reply, up to 6–12 weeks if escalated.</p>
      </div>
    </div>
  </div>
  
  </section>

  <!-- Testimonials -->
  <section class="relative py-16" style="background-image: url('images/airport-soft-bg.jpg'); background-size: cover; background-position: center;">
  <div class="bg-white bg-opacity-90 py-12">
    <div class="max-w-6xl mx-auto px-4">
      <h2 class="text-2xl font-bold text-center mb-10">What Our Clients Say</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="bg-gray-100 p-6 rounded shadow" data-aos="zoom-in">
          <p class="italic">“Quaerens got me €400 for my cancelled flight from Madrid – super easy!”</p>
          <p class="font-semibold mt-4">– Laura P.</p>
        </div>
        <div class="bg-gray-100 p-6 rounded shadow" data-aos="zoom-in">
          <p class="italic">“I didn’t even know I had a right to claim. Thank you for making it simple!”</p>
          <p class="font-semibold mt-4">– Marc V.</p>
        </div>
        <div class="bg-gray-100 p-6 rounded shadow" data-aos="zoom-in">
          <p class="italic">“Very professional team. Highly recommended for any flight issues.”</p>
          <p class="font-semibold mt-4">– Sofia R.</p>
        </div>
      </div>
    </div>
  </div></section>

<!-- Image Grid Section -->
<section class="bg-gray-50 py-12">
  <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6 px-4 text-center">
    <div data-aos="zoom-in">
      <img src="images/traveler1.jpg" class="rounded-xl shadow-md mb-3" alt="Happy Traveler" />
      <p class="text-sm text-gray-600">Real clients getting real results</p>
    </div>
    <div data-aos="zoom-in" data-aos-delay="100">
      <img src="images/traveler2.jpg" class="rounded-xl shadow-md mb-3" alt="Flight Compensation" />
      <p class="text-sm text-gray-600">Fast claims, no fees</p>
    </div>
    <div data-aos="zoom-in" data-aos-delay="200">
      <img src="images/traveler3.jpg" class="rounded-xl shadow-md mb-3" alt="Airport Lounge" />
      <p class="text-sm text-gray-600">Relax — we’ll handle the paperwork</p>
    </div>
  </div>
</section>

<!-- Footer -->
  <footer style="text-align: center; font-size: 0.85rem; color: #6b7280; padding: 2rem 1rem; max-width: 800px; margin: 0 auto;">
  © 2025 Quaerens Ltd. All rights reserved.<br />
  <a href="privacy.html" style="color: #2563eb; text-decoration: none; margin: 0 0.5rem;">Privacy Policy</a> |
  <a href="terms.html" style="color: #2563eb; text-decoration: none; margin: 0 0.5rem;">Terms of Use</a> |
  <a href="gdpr.html" style="color: #2563eb; text-decoration: none; margin: 0 0.5rem;">GDPR</a> |
  <a href="contact.html" style="color: #2563eb; text-decoration: none; margin: 0 0.5rem;">Contact Us</a>
</footer>

  <script>
    document.getElementById('compensation-form').addEventListener('submit', function (e) {
      e.preventDefault();

      const delay = parseInt(document.getElementById('delay').value);
      let compensation = 0;

      if (delay >= 4) {
        compensation = 600;
      } else if (delay >= 3) {
        compensation = 400;
      }

      const result = document.getElementById('compensation-result');
      if (compensation > 0) {
        result.innerHTML = `✅ You may be entitled to <strong>€${compensation}</strong> in compensation.<br>
          <a href="claim.html?type=flight-delay" style="color: white; background: #2563eb; padding: 0.6rem 1.2rem; border-radius: 6px; display: inline-block; margin-top: 1rem; text-decoration: none;">Start Your Claim</a>`;
      } else {
        result.innerHTML = `ℹ️ Unfortunately, delays under 3 hours don't qualify under EU261 rules.`;
      }
    });

    const airportList = [
      "Amsterdam Schiphol (AMS)", "Barcelona El Prat (BCN)", "Berlin Brandenburg (BER)", "Brussels Zaventem (BRU)",
      "Copenhagen (CPH)", "Dublin (DUB)", "Edinburgh (EDI)", "Frankfurt (FRA)", "Geneva (GVA)", "Lisbon (LIS)",
      "London Gatwick (LGW)", "London Heathrow (LHR)", "Madrid Barajas (MAD)", "Malaga (AGP)", "Manchester (MAN)",
      "Milan Malpensa (MXP)", "Munich (MUC)", "Nice Côte d'Azur (NCE)", "Oslo Gardermoen (OSL)", "Paris Charles de Gaulle (CDG)",
      "Paris Orly (ORY)", "Porto (OPO)", "Prague Vaclav Havel (PRG)", "Rome Fiumicino (FCO)", "Stockholm Arlanda (ARN)",
      "Vienna (VIE)", "Warsaw Chopin (WAW)", "Zagreb (ZAG)", "Zurich (ZRH)", "Athens (ATH)", "Palma de Mallorca (PMI)",
      "Ibiza (IBZ)", "Tenerife South (TFS)", "Gran Canaria (LPA)", "Rhodes (RHO)", "Corfu (CFU)", "Heraklion (HER)",
      "Larnaca (LCA)", "Paphos (PFO)", "Split (SPU)", "Dubrovnik (DBV)", "Reykjavik (KEF)"
    ];

    const datalist = document.getElementById('airports');
    airportList.forEach(name => {
      const option = document.createElement('option');
      option.value = name;
      datalist.appendChild(option);
    });
  </script>
<script type="text/javascript">
  var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
  (function(){
    var s1=document.createElement("script"),
        s0=document.getElementsByTagName("script")[0];
    s1.async=true;
    s1.src='https://embed.tawk.to/68134ea200e88619103f49ca/1iq5mmahm';
    s1.charset='UTF-8';
    s1.setAttribute('crossorigin','*');
    s0.parentNode.insertBefore(s1,s0);
  })();
</script>
<button id="scrollTopBtn" class="hidden fixed bottom-6 right-6 z-50 p-3 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition">
  ↑
</button>
<script>
  const scrollBtn = document.getElementById("scrollTopBtn");
  window.addEventListener("scroll", () => {
    scrollBtn.classList.toggle("hidden", window.scrollY < 300);
  });
  scrollBtn.addEventListener("click", () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>

<script type="module" id="firebase-script">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";
  import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-storage.js";
  
  const firebaseConfig = {
    apiKey: "AIzaSyCOo_Sa242sUuGyZD8jO8kk12V1aBX7wMA",
    authDomain: "quaerensclaims.firebaseapp.com",
    projectId: "quaerensclaims",
    storageBucket: "quaerensclaims.appspot.com",
    messagingSenderId: "57715464932",
    appId: "1:57715464932:web:a69a4949f36c2ad214eaf1",
    measurementId: "G-GRT3XKF4KS"
  };
  
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  
  const airlineEmails = {
  "Ryanair": "claims@ryanair.com",
  "easyJet": "customer.support@easyjet.com",
  "Lufthansa": "customer.relations@lufthansa.com",
  "Vueling": "atencion.clientes@vueling.com",
  "British Airways": "customer.relations@ba.com",
  "KLM": "mail@klm.nl",
  "Transavia": "servicecentre@transavia.com",
  "Air France": "mail.afklmplc@airfrance.fr",
  "Iberia": "clasica@iberia.es",
  "Jet2": "customer.service@jet2.com",
  "Wizz Air": "claim@wizzair.com",
  "TUI Airways": "aftertravel@tui.co.uk",
  "Norwegian": "complaints@norwegian.com",
  "Aer Lingus": "customerqueries@aerlingus.com",
  "Brussels Airlines": "claim@brusselsairlines.com",
  "Swiss International Air Lines": "contact@swiss.com",
  "Eurowings": "customercare@eurowings.com",
  "TAP Air Portugal": "customer@tap.pt",
  "Finnair": "feedback@finnair.com",
  "SAS Scandinavian Airlines": "customercare@sas.se",
  "Aegean Airlines": "customercare@aegeanair.com",
  "LOT Polish Airlines": "contact@lot.pl",
  "Air Malta": "customer.relations@airmalta.com",
  "Corendon Airlines": "info@corendon-airlines.com",
  "SunExpress": "customer.service@sunexpress.com",
  "Blue Air": "support@blueairweb.com",
  "Volotea": "support@volotea.com",
  "Lauda Europe": "assistance@laudamotion.com",
  "Widerøe": "info@wideroe.no",
  "Croatia Airlines": "contact@croatiaairlines.hr",
  "Alitalia (ITA Airways)": "customer.relations@itaspa.com",
  "Condor": "service@condor.com"
};

const airlineLogos = {
  "Ryanair": "images/logos/ryanair.png",
  "easyJet": "images/logos/easyjet.png",
  "Lufthansa": "images/logos/lufthansa.png",
  "Vueling": "images/logos/vueling.png",
  "British Airways": "images/logos/britishairways.png",
  "KLM": "images/logos/klm.png",
  "Transavia": "images/logos/transavia.png",
  "Air France": "images/logos/airfrance.png",
  "Iberia": "images/logos/iberia.png",
  "Jet2": "images/logos/jet2.png",
  "Wizz Air": "images/logos/wizzair.png",
  "TUI Airways": "images/logos/tuiairways.png",
  "Norwegian": "images/logos/norwegian.png",
  "Aer Lingus": "images/logos/aerlingus.png",
  "Brussels Airlines": "images/logos/brusselsairlines.png",
  "Swiss International Air Lines": "images/logos/swissinternationalairlines.png",
  "Eurowings": "images/logos/eurowings.png",
  "TAP Air Portugal": "images/logos/tapairportugal.png",
  "Finnair": "images/logos/finnair.png",
  "SAS Scandinavian Airlines": "images/logos/sasscandinavianairlines.png",
  "Aegean Airlines": "images/logos/aegeanairlines.png",
  "LOT Polish Airlines": "images/logos/lotpolishairlines.png",
  "Air Malta": "images/logos/airmalta.png",
  "Corendon Airlines": "images/logos/corendonairlines.png",
  "SunExpress": "images/logos/sunexpress.png",
  "Blue Air": "images/logos/blueair.png",
  "Volotea": "images/logos/volotea.png",
  "Lauda Europe": "images/logos/laudaeurope.png",
  "Widerøe": "images/logos/wideroe.png",
  "Croatia Airlines": "images/logos/croatiaairlines.png",
  "Alitalia (ITA Airways)": "images/logos/italiaitaairways.png",
  "Condor": "images/logos/condor.png"
};

document.getElementById("airline").addEventListener("input", function () {
  const airlineName = this.value;
  const logoPath = airlineLogos[airlineName];

  const previewContainer = document.getElementById("airlineLogoPreview");
  if (logoPath) {
    previewContainer.innerHTML = `<img src="${logoPath}" alt="${airlineName} Logo" class="mx-auto h-12 md:h-16 mt-2">`;
  } else {
    previewContainer.innerHTML = "";
  }
});

// ✅ UPDATED SCRIPT WITH BOOKING REF + IBAN FIELDS INCLUDED IN CLAIM DATA AND PDF

<script>
  document.getElementById("claim-letter-form").addEventListener("submit", async function (e) {
    e.preventDefault();

    const fullName = document.getElementById("fullName").value.trim();
    const flightNumber = document.getElementById("flightNumber").value.trim();
    const flightDate = document.getElementById("flightDate").value;
    const depAirport = document.getElementById("depAirport").value.trim();
    const arrAirport = document.getElementById("arrAirport").value.trim();
    const airline = document.getElementById("airline").value;
    const reason = document.getElementById("reason").value.trim();
    const language = document.getElementById("language").value;
    const email = document.getElementById("email").value.trim();
    const handleOption = document.getElementById("handleOption").value;
    const donation = document.getElementById("donation").value;
    const distance = document.getElementById("distance").value;
    const delayDuration = document.getElementById("delayDuration").value;
    const bookingRef = document.getElementById("bookingRef").value.trim();
    const iban = document.getElementById("iban").value.trim();
    const compensation = calculateCompensation(distance, delayDuration);

    if (!fullName || !flightNumber || !flightDate || !depAirport || !arrAirport || !email || !airline) {
      alert("Please fill in all required fields.");
      return;
    }

    const file = document.getElementById("fileUpload").files[0];
    let fileURL = "";

    if (file) {
      const storage = getStorage(app);
      const storageRef = ref(storage, `uploads/${Date.now()}-${file.name}`);
      const uploadSnapshot = await uploadBytes(storageRef, file);
      fileURL = await getDownloadURL(uploadSnapshot.ref);
    }

    const claimData = {
      fullName,
      flightNumber,
      flightDate,
      depAirport,
      arrAirport,
      airline,
      reason,
      distance,
      delayDuration,
      compensation,
      language,
      email,
      handleOption,
      donation,
      bookingRef,
      iban,
      fileURL,
      createdAt: serverTimestamp(),
      airlineEmail: airlineEmails[airline] || ""
    };

    try {
      await addDoc(collection(db, "flightClaimLetters"), claimData);

      if (handleOption === "pdf") {
        generatePDF(claimData);
      } else if (handleOption === "email") {
        await fetch("https://us-central1-quaerensclaims.cloudfunctions.net/sendClaimEmail", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(claimData)
        });
        alert("✅ Your letter has been emailed!");
      } else if (handleOption === "quaerens") {
        alert("✅ Your case has been submitted to Quaerens. We’ll contact you shortly.");
      }

      document.getElementById("claim-letter-result").classList.remove("hidden");
    } catch (err) {
      console.error("Error saving claim:", err);
      alert("Something went wrong. Please try again.");
    }
  });

  function generatePDF(data) {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    const today = new Date().toLocaleDateString();
    const claimRef = `Q-${new Date().toISOString().slice(0, 10).replace(/-/g, "")}-${Math.random().toString(36).substring(2, 8).toUpperCase()}`;
    const airlineContact = `${data.airline}\n${data.airlineEmail ? "Email: " + data.airlineEmail : ""}`;
    const logoPath = airlineLogos[data.airline];

    function insertHeader() {
      if (logoPath) {
        const img = new Image();
        img.crossOrigin = "anonymous";
        img.src = logoPath;
        img.onload = () => {
          doc.addImage(img, "PNG", 150, 8, 40, 15);
          insertContent();
        };
        img.onerror = insertContent;
      } else {
        insertContent();
      }
    }

    function insertContent() {
      let y = 20;
      doc.setFont("helvetica", "normal");
      doc.setFontSize(12);
      doc.setTextColor(0, 0, 0);

      doc.setFont(undefined, "bold");
      doc.text(today, 10, y);
      y += 10;

      doc.setFont(undefined, "normal");
      doc.text(`Claim Reference: ${claimRef}`, 10, y);
      y += 12;

      doc.setFont(undefined, "bold");
      doc.text("To:", 10, y);
      y += 6;
      doc.setFont(undefined, "normal");
      doc.text(airlineContact, 10, y);
      y += 14;

      doc.setFont(undefined, "bold");
      doc.text("Subject:", 10, y);
      y += 6;
      doc.setFont(undefined, "normal");
      doc.text("Compensation Request under EC Regulation 261/2004", 10, y);
      y += 10;

      const intro = `Dear Sir/Madam,\n\nI am writing to formally request compensation under EC Regulation 261/2004 for the following disrupted flight:`;
      const introLines = doc.splitTextToSize(intro, 180);
      doc.text(introLines, 10, y);
      y += introLines.length * 6 + 6;

      doc.setFont(undefined, "bold");
      doc.text("Flight Details:", 10, y);
      y += 8;

      doc.setFont(undefined, "normal");
      const details = [
        `Passenger Name: ${data.fullName}`,
        `Email: ${data.email}`,
        `Flight Number: ${data.flightNumber}`,
        `Booking Reference: ${data.bookingRef}`,
        `Flight Date: ${data.flightDate}`,
        `Departure Airport: ${data.depAirport}`,
        `Arrival Airport: ${data.arrAirport}`,
        `Airline: ${data.airline}`,
        `Reason for Delay: ${data.reason || "Not specified"}`,
        `Flight Distance: ${data.distance}`,
        `Delay Duration: ${data.delayDuration}`,
        `Estimated Compensation: €${data.compensation}`,
        `Preferred Payment Method: ${data.iban}`
        `Donation Preference: ${data.donation}`
      ];
      details.forEach(line => {
        doc.text(line, 10, y);
        y += 7;
      });

      y += 4;
      const closing = `According to EC Regulation 261/2004, I am entitled to this compensation based on the circumstances described above. Please process this claim within 14 days. I reserve the right to escalate to the relevant enforcement body or seek legal redress if not resolved in time.\n\nSincerely,\n\n${data.fullName}`;
      const closingLines = doc.splitTextToSize(closing, 180);
      doc.text(closingLines, 10, y);
      y += closingLines.length * 6;

      doc.setFontSize(10);
      doc.setTextColor(120);
      doc.text("This document was generated at no cost by Quaerens.co.uk.", 10, 290);

      doc.save(`EC261-Claim-${data.flightNumber}.pdf`);
    }

    insertHeader();
  }
</script>


  </script>
  
</body>
</html>
