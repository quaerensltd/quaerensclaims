<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="images/favicon.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flight Delay Compensation | Quaerens</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .content-box {
      max-width: 600px;
      margin: 0 auto;
      padding: 2rem;
      background: #f9fafb;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
    .goog-te-banner-frame.skiptranslate,
  .goog-logo-link,
  .goog-te-gadget {
    display: none !important;
  }
  body {
    top: 0px !important;
  }
    form label {
      display: block;
      margin-top: 1rem;
      font-weight: 600;
    }
    form input, form select {
      width: 100%;
      padding: 0.6rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-top: 0.5rem;
    }
  </style>
  <script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({
        pageLanguage: 'en',
        includedLanguages: 'en,es,fr,de,nl,it',
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE
      }, 'google_translate_element');
    }
  </script>
  <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
  <script>
    function setLanguage(lang) {
      var newLang = '/auto/' + lang;
      document.cookie = 'googtrans=' + newLang + '; path=/';
      document.cookie = 'googtrans=' + newLang + '; domain=' + window.location.hostname + '; path=/';
      location.reload();
    }
  </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  </head>

<body class="bg-gray-50 text-gray-800">
  <div id="google_translate_element" style="display: none;"></div>
  <!-- Header -->
  <header class="bg-white shadow">
    <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
      <a href="/">
        <img src="images/quaerens-logo.png" alt="Quaerens Logo" class="h-20 w-auto">
      </a>
      <nav>
        <a href="/" class="text-gray-700 hover:text-blue-600 font-medium">Home</a>
      </nav>
      
    </div>
  </header>

  <!-- Hero Section -->
  <section class="relative bg-blue-600 text-white py-16" style="background-image: url('images/hero-flight.jpg'); background-size: cover; background-position: center;">
  <div class="absolute inset-0 bg-blue-900 bg-opacity-60"></div>
  <div class="max-w-4xl mx-auto text-center relative z-10">
    <h1 class="text-4xl font-extrabold mb-4">Flight Delayed or Cancelled?</h1>
    <p class="text-xl mb-6">You could be entitled to up to ‚Ç¨600 in compensation under EU Regulation EC 261/2004.</p>
    <div class="mt-8 bg-white text-blue-700 text-xl font-bold px-6 py-5 rounded shadow-md max-w-3xl mx-auto text-center">
  <span class="block text-2xl md:text-3xl font-extrabold text-gray-900 mb-2">Delayed or cancelled flight?</span>
  <span class="block text-xl md:text-2xl text-gray-800">We fight to get you the compensation you deserve ‚Äî <span style="display: inline-block; font-size: 1.8rem; color: black; font-weight: 800; background: #fef3c7; padding: 0.4rem 1rem; border-radius: 1rem;">no win, no fee!</span></span>
</div>
  </div>
</section>

  <!-- Claim Calculator -->
  <section id="calculator" class="py-16 bg-white">
  <div class="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-2 gap-8 items-start">

    <!-- Left: Legal Info -->
    <div class="bg-blue-50 rounded-xl p-6 shadow-md" data-aos="fade-up">
      <h2 class="text-xl font-bold mb-4 text-blue-800">Why You‚Äôre Entitled to Compensation</h2>
      <p class="text-gray-700 mb-3">
        Under <strong>EU Regulation 261/2004</strong>, you can claim up to <strong>‚Ç¨600</strong> if your flight was delayed,
        cancelled, or overbooked ‚Äî and the airline was at fault. This includes technical issues, crew shortages, and more.
      </p>
      <p class="text-gray-600">
        If your flight arrived more than 3 hours late, and it wasn‚Äôt due to extraordinary circumstances (like extreme weather),
        you may have a valid claim. Our experts handle the process ‚Äî <strong>no win, no fee</strong>.
      </p>
      <hr class="my-4">
      <h3 class="text-xl font-bold text-blue-800 mb-2">Why should you choose us?</h3>
      <ul class="list-disc list-inside text-gray-700 space-y-2">
        <li>We handle the entire process, including negotiations with the airline.</li>
        <li>Save your time and avoid complex paperwork.</li>
        <li>Only 25% fee after successful claim ‚Äî no upfront fees.</li>
      </ul>
    </div>

    <!-- Right: Calculator -->
    <div class="bg-white rounded-xl p-6 shadow-md content-box" data-aos="fade-up">
      <h2>‚úàÔ∏è Check Your Flight Delay Compensation</h2>
      <p>Enter your flight details to see if you‚Äôre entitled to compensation under EU261.</p>
      <form id="compensation-form">
        <label for="departure">Departure Airport</label>
        <input list="airports" id="departure" placeholder="e.g. Amsterdam AMS" required>

        <label for="arrival">Arrival Airport</label>
        <input list="airports" id="arrival" placeholder="e.g. Malaga AGP" required>

        <label for="delay">Delay Duration</label>
        <select id="delay" required>
          <option value="">Select Delay Duration</option>
          <option value="2">Less than 3 hours</option>
          <option value="3">3 to 4 hours</option>
          <option value="4">More than 4 hours</option>
        </select>

        <button type="submit"
                style="margin-top: 1.5rem; padding: 0.75rem 1.5rem; background: #2563eb; color: white; border: none; border-radius: 8px; font-weight: 600; font-size: 1rem; cursor: pointer;">
          Check Compensation
        </button>
      </form>

      <div id="compensation-result" style="margin-top: 1.5rem; font-size: 1.2rem; font-weight: 500;"></div>

      <datalist id="airports"></datalist>
    </div>

  </div>
</section>

<!-- EC261 Claim Letter Generator -->
<section class="py-16 bg-blue-50">
  <div class="max-w-3xl mx-auto px-4 bg-white p-8 rounded-xl shadow-md">
    <h2 class="text-2xl font-bold text-blue-800 mb-4 text-center">üìù Generate Your Free EC261 Claim Letter</h2>
    <p class="text-gray-700 text-center mb-6">Fill in your flight and contact details to get a free compensation claim letter (PDF or email). No lawyer needed.</p>
    <form id="claim-letter-form" class="space-y-4">

      <div>
        <label class="font-semibold">Full Name</label>
        <input type="text" id="fullName" required class="w-full border p-2 rounded">
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="font-semibold">Flight Number</label>
          <input type="text" id="flightNumber" required class="w-full border p-2 rounded" placeholder="e.g. FR1234">
        </div>
        <div>
          <label class="font-semibold">Flight Date</label>
          <input type="date" id="flightDate" required class="w-full border p-2 rounded">
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="font-semibold">Departure Airport</label>
          <input list="airports" id="depAirport" required class="w-full border p-2 rounded">
        </div>
        <div>
          <label class="font-semibold">Arrival Airport</label>
          <input list="airports" id="arrAirport" required class="w-full border p-2 rounded">
        </div>
      </div>

      <div>
        <div>
          <label class="font-semibold">Airline</label>
          <input list="airlineList" id="airline" placeholder="Start typing airline name" required class="w-full border p-2 rounded">
          <datalist id="airlineList">
            <div id="airlineLogoPreview" class="mt-4 text-center"></div>
            <option value="Ryanair">
            <option value="easyJet">
            <option value="Lufthansa">
            <option value="Vueling">
            <option value="British Airways">
            <option value="KLM">
            <option value="Transavia">
            <option value="Air France">
            <option value="Iberia">
            <option value="Jet2">
            <option value="Wizz Air">
            <option value="TUI Airways">
            <option value="Norwegian">
            <option value="Aer Lingus">
            <option value="Brussels Airlines">
            <option value="Swiss International Air Lines">
            <option value="Eurowings">
            <option value="TAP Air Portugal">
            <option value="Finnair">
            <option value="SAS Scandinavian Airlines">
            <option value="Aegean Airlines">
            <option value="LOT Polish Airlines">
            <option value="Air Malta">
            <option value="Corendon Airlines">
            <option value="SunExpress">
            <option value="Blue Air">
            <option value="Volotea">
            <option value="Lauda Europe">
            <option value="Wider√∏e">
            <option value="Croatia Airlines">
            <option value="Alitalia (ITA Airways)">
            <option value="Condor">
          </datalist>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="font-semibold">Flight Issue</label>
            <select id="disruptionType" class="w-full border p-2 rounded" required>
              <option value="">Select one</option>
              <option value="delayed">Delayed (3+ hours)</option>
              <option value="cancelled">Cancelled</option>
              <option value="denied">Denied Boarding</option>
              <option value="missed">Missed Connection</option>
            </select>
          </div>
          <div>
            <label class="font-semibold">Reason for Delay</label>
            <select id="reason" class="w-full border p-2 rounded">
              <option value="">Select one (optional)</option>
              <option value="technical">Technical Issue</option>
              <option value="crew">Crew Shortage</option>
              <option value="overbooking">Overbooking</option>
              <option value="weather">Severe Weather</option>
              <option value="strike">Strike</option>
              <option value="security">Security Issue</option>
              <option value="other">Other</option>
            </select>
          </div>
        </div>
        
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="font-semibold">Preferred Language</label>
          <select id="language" class="w-full border p-2 rounded">
            <option value="en">English</option>
            <option value="fr">Fran√ßais</option>
            <option value="es">Espa√±ol</option>
            <option value="de">Deutsch</option>
            <option value="nl">Nederlands</option>
            <option value="it">Italiano</option>
            <option value="sv">Svenska</option>
            <option value="el">ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨</option>
          </select>
        </div>
        <div>
          <label class="font-semibold">Email Address</label>
          <input type="email" id="email" class="w-full border p-2 rounded" required>
        </div>
      </div>

      <div>
        <label class="font-semibold">Would you like us to handle it for you?</label>
        <select id="handleOption" class="w-full border p-2 rounded">
          <option value="pdf">No thanks ‚Äì just give me the PDF letter</option>
          <option value="email">Email me the letter</option>
          <option value="quaerens">Let Quaerens handle the claim for me (no win, no fee)</option>
        </select>
      </div>

      <div>
        <label class="font-semibold">Would you like to donate?</label>
        <select id="donation" class="w-full border p-2 rounded">
          <option value="none">No donation</option>
          <option value="quaerens">Yes ‚Äî support Quaerens' free services</option>
          <option value="charity">Yes ‚Äî donate to a selected charity</option>
          <option value="split">Split between Quaerens and charity</option>
        </select>
      </div>
      <label class="font-semibold">Upload Boarding Pass or Document (optional)</label>
      <input type="file" id="fileUpload" class="w-full border p-2 rounded" accept=".pdf,.jpg,.jpeg,.png">
    </div>
      <div class="text-center">
        <button type="submit" class="bg-blue-600 text-white px-6 py-3 rounded font-semibold hover:bg-blue-700 transition">
          Generate My Claim Letter
        </button>
      </div>
    </form>

    <div id="claim-letter-result" class="mt-6 text-center text-lg font-medium text-green-600 hidden">
      ‚úÖ Your claim letter has been generated!
    </div>
  </div>
</section>

<!-- Legal Explanation -->
  <section class="bg-gray-50 py-16">
    <div class="max-w-6xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-6 mb-16 text-center">
      <div class="bg-white rounded-xl shadow-md p-6 border border-gray-200" data-aos="fade-up">
        <h3 class="text-lg font-bold text-blue-700 mb-2">USE A LAWYER</h3>
        <ul class="text-gray-700 text-sm list-disc list-inside text-left">
          <li>Higher Fees (¬£50 to ¬£500, + Hearing Fees)</li>
          <li>Risk of losing money</li>
          <li>Hours of your time lost</li>
          <li>The result unknown</li>
        </ul>
      </div>
      <div class="bg-white rounded-xl shadow-md p-6 border-4 border-blue-600" data-aos="fade-up" data-aos-delay="100">
        <h3 class="text-lg font-bold text-blue-700 mb-2">QUAERENS</h3>
        <ul class="text-gray-700 text-sm list-disc list-inside text-left">
          <li>Zero Cost Risk & Additional legal costs</li>
          <li>Pay Only When We Win</li>
          <li>Takes only 2 minutes to Claim</li>
          <li>Close to 100% Success rate</li>
        </ul>
      </div>
      <div class="bg-white rounded-xl shadow-md p-6 border border-gray-200" data-aos="fade-up" data-aos-delay="200">
        <h3 class="text-lg font-bold text-blue-700 mb-2">DO IT YOURSELF</h3>
        <ul class="text-gray-700 text-sm list-disc list-inside text-left">
          <li>Low cost risk, most airlines ignore claims</li>
          <li>Case might end up in court</li>
          <li>Takes hours of your time</li>
          <li>Outcome Unclear</li>
        </ul>
</div>
    
    <div class="bg-white rounded-xl shadow-md p-6 border border-gray-200" data-aos="fade-up" data-aos-delay="200">
      <h3 class="text-lg font-bold text-blue-700 mb-2">LAWS AND REGULATIONS</h3>
      <p class="text-gray-700 text-sm">
        The amount of compensation you are entitled to depends on distance and delay time, fixed by the EU and the same for all airlines.
      </p>
      <div class="mt-4 text-sm text-left">
        <table class="w-full border text-gray-800 text-sm">
          <thead>
            <tr>
              <th class="border px-2 py-1">Flight Distance</th>
              <th class="border px-2 py-1">Delay</th>
              <th class="border px-2 py-1">Compensation</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="border px-2 py-1">&lt; 1,500 km</td>
              <td class="border px-2 py-1">&gt; 3 Hours</td>
              <td class="border px-2 py-1">‚Ç¨250</td>
            </tr>
            <tr>
              <td class="border px-2 py-1">1,500 ‚Äì 3,500 km</td>
              <td class="border px-2 py-1">&gt; 3 Hours</td>
              <td class="border px-2 py-1">‚Ç¨400</td>
            </tr>
            <tr>
              <td class="border px-2 py-1">&gt; 3,500 km</td>
              <td class="border px-2 py-1">3‚Äì4 Hours</td>
              <td class="border px-2 py-1">‚Ç¨300</td>
            </tr>
            <tr>
              <td class="border px-2 py-1">&gt; 3,500 km</td>
              <td class="border px-2 py-1">&gt; 4 Hours</td>
              <td class="border px-2 py-1">‚Ç¨600</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="max-w-4xl mx-auto px-4">
    <h2 class="text-2xl font-bold mb-6 text-center">Your Rights Under EC 261</h2>
    <ul class="list-disc list-inside space-y-4">
      <li data-aos="fade-up">If your flight is delayed more than 3 hours, you may claim compensation of ‚Ç¨250 to ‚Ç¨600.</li>
      <li data-aos="fade-up">Cancelled flights, denied boarding, and missed connections are also covered.</li>
      <li data-aos="fade-up">The airline must be responsible (e.g., technical fault or crew issue).</li>
      <li data-aos="fade-up">You can claim for flights up to 3 years ago depending on your country.</li>
      <li data-aos="fade-up">
        <button onclick="document.getElementById('faqModal').classList.remove('hidden')" class="text-blue-600 underline">
          Full summary ‚Äì Frequently Asked Questions (FAQ)
        </button>
      </li>
    </ul>
  </div>
  
  <!-- FAQ Modal -->
  <div id="faqModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
    <div class="bg-white max-w-3xl max-h-[90vh] overflow-y-auto p-6 rounded-xl shadow-lg relative">
      <button onclick="document.getElementById('faqModal').classList.add('hidden')" class="absolute top-2 right-2 text-xl font-bold">&times;</button>
      <h3 class="text-xl font-semibold mb-4">Flight Delay & Cancellation Compensation ‚Äì FAQ</h3>
      <div class="space-y-4 text-sm leading-relaxed">
        <p><strong>What is EC Regulation 261/2004?</strong><br>
        A European Union law that entitles airline passengers to compensation for long delays, cancellations, and denied boarding.</p>
  
        <p><strong>Who is eligible for compensation?</strong><br>
        Passengers delayed 3+ hours, cancelled within 14 days, or denied boarding due to the airline‚Äôs fault.</p>
  
        <p><strong>How far back can I claim?</strong><br>
        Up to 6 years in the UK, 3 years in most EU countries.</p>
  
        <p><strong>What are the compensation amounts?</strong><br>
        - ‚Ç¨250 for flights under 1,500 km<br>
        - ‚Ç¨400 for 1,500‚Äì3,500 km<br>
        - ‚Ç¨600 for over 3,500 km (4+ hours delay)</p>
  
        <p><strong>Can I claim for a short flight (e.g. 100 miles)?</strong><br>
        Yes, if arrival delay is 3+ hours and it‚Äôs the airline‚Äôs fault, you may still claim ‚Ç¨250.</p>
  
        <p><strong>What counts as 'extraordinary circumstances'?</strong><br>
        Bad weather, strikes, air traffic control issues ‚Äî but technical faults and crew issues usually qualify.</p>
  
        <p><strong>Do non-EU airlines count?</strong><br>
        Yes, if departing from the EU/UK or arriving on an EU/UK airline.</p>
  
        <p><strong>Who pays the compensation?</strong><br>
        The airline ‚Äì not the travel agent or booking site.</p>
  
        <p><strong>What if I got a refund or voucher?</strong><br>
        You can still claim compensation in addition to other remedies.</p>
  
        <p><strong>Will I be notified if the claim is accepted?</strong><br>
        If you use Quaerens Ltd and provide a signed LoA, the airline will usually notify us directly.</p>
  
        <p><strong>How much does Quaerens charge?</strong><br>
        25% of recovered compensation, including VAT ‚Äì no-win, no-fee.</p>
  
        <p><strong>How long does it take?</strong><br>
        2‚Äì4 weeks for a reply, up to 6‚Äì12 weeks if escalated.</p>
      </div>
    </div>
  </div>
  
  </section>

  <!-- Testimonials -->
  <section class="relative py-16" style="background-image: url('images/airport-soft-bg.jpg'); background-size: cover; background-position: center;">
  <div class="bg-white bg-opacity-90 py-12">
    <div class="max-w-6xl mx-auto px-4">
      <h2 class="text-2xl font-bold text-center mb-10">What Our Clients Say</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="bg-gray-100 p-6 rounded shadow" data-aos="zoom-in">
          <p class="italic">‚ÄúQuaerens got me ‚Ç¨400 for my cancelled flight from Madrid ‚Äì super easy!‚Äù</p>
          <p class="font-semibold mt-4">‚Äì Laura P.</p>
        </div>
        <div class="bg-gray-100 p-6 rounded shadow" data-aos="zoom-in">
          <p class="italic">‚ÄúI didn‚Äôt even know I had a right to claim. Thank you for making it simple!‚Äù</p>
          <p class="font-semibold mt-4">‚Äì Marc V.</p>
        </div>
        <div class="bg-gray-100 p-6 rounded shadow" data-aos="zoom-in">
          <p class="italic">‚ÄúVery professional team. Highly recommended for any flight issues.‚Äù</p>
          <p class="font-semibold mt-4">‚Äì Sofia R.</p>
        </div>
      </div>
    </div>
  </div></section>

<!-- Image Grid Section -->
<section class="bg-gray-50 py-12">
  <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6 px-4 text-center">
    <div data-aos="zoom-in">
      <img src="images/traveler1.jpg" class="rounded-xl shadow-md mb-3" alt="Happy Traveler" />
      <p class="text-sm text-gray-600">Real clients getting real results</p>
    </div>
    <div data-aos="zoom-in" data-aos-delay="100">
      <img src="images/traveler2.jpg" class="rounded-xl shadow-md mb-3" alt="Flight Compensation" />
      <p class="text-sm text-gray-600">Fast claims, no hidden fees</p>
    </div>
    <div data-aos="zoom-in" data-aos-delay="200">
      <img src="images/traveler3.jpg" class="rounded-xl shadow-md mb-3" alt="Airport Lounge" />
      <p class="text-sm text-gray-600">Relax ‚Äî we‚Äôll handle the paperwork</p>
    </div>
  </div>
</section>

<!-- Footer -->
  <footer style="text-align: center; font-size: 0.85rem; color: #6b7280; padding: 2rem 1rem; max-width: 800px; margin: 0 auto;">
  ¬© 2025 Quaerens Ltd. All rights reserved.<br />
  <a href="privacy.html" style="color: #2563eb; text-decoration: none; margin: 0 0.5rem;">Privacy Policy</a> |
  <a href="terms.html" style="color: #2563eb; text-decoration: none; margin: 0 0.5rem;">Terms of Use</a> |
  <a href="gdpr.html" style="color: #2563eb; text-decoration: none; margin: 0 0.5rem;">GDPR</a> |
  <a href="contact.html" style="color: #2563eb; text-decoration: none; margin: 0 0.5rem;">Contact Us</a>
</footer>

  <script>
    document.getElementById('compensation-form').addEventListener('submit', function (e) {
      e.preventDefault();

      const delay = parseInt(document.getElementById('delay').value);
      let compensation = 0;

      if (delay >= 4) {
        compensation = 600;
      } else if (delay >= 3) {
        compensation = 400;
      }

      const result = document.getElementById('compensation-result');
      if (compensation > 0) {
        result.innerHTML = `‚úÖ You may be entitled to <strong>‚Ç¨${compensation}</strong> in compensation.<br>
          <a href="claim.html?type=flight-delay" style="color: white; background: #2563eb; padding: 0.6rem 1.2rem; border-radius: 6px; display: inline-block; margin-top: 1rem; text-decoration: none;">Start Your Claim</a>`;
      } else {
        result.innerHTML = `‚ÑπÔ∏è Unfortunately, delays under 3 hours don't qualify under EU261 rules.`;
      }
    });

    const airportList = [
      "Amsterdam Schiphol (AMS)", "Barcelona El Prat (BCN)", "Berlin Brandenburg (BER)", "Brussels Zaventem (BRU)",
      "Copenhagen (CPH)", "Dublin (DUB)", "Edinburgh (EDI)", "Frankfurt (FRA)", "Geneva (GVA)", "Lisbon (LIS)",
      "London Gatwick (LGW)", "London Heathrow (LHR)", "Madrid Barajas (MAD)", "Malaga (AGP)", "Manchester (MAN)",
      "Milan Malpensa (MXP)", "Munich (MUC)", "Nice C√¥te d'Azur (NCE)", "Oslo Gardermoen (OSL)", "Paris Charles de Gaulle (CDG)",
      "Paris Orly (ORY)", "Porto (OPO)", "Prague Vaclav Havel (PRG)", "Rome Fiumicino (FCO)", "Stockholm Arlanda (ARN)",
      "Vienna (VIE)", "Warsaw Chopin (WAW)", "Zagreb (ZAG)", "Zurich (ZRH)", "Athens (ATH)", "Palma de Mallorca (PMI)",
      "Ibiza (IBZ)", "Tenerife South (TFS)", "Gran Canaria (LPA)", "Rhodes (RHO)", "Corfu (CFU)", "Heraklion (HER)",
      "Larnaca (LCA)", "Paphos (PFO)", "Split (SPU)", "Dubrovnik (DBV)", "Reykjavik (KEF)"
    ];

    const datalist = document.getElementById('airports');
    airportList.forEach(name => {
      const option = document.createElement('option');
      option.value = name;
      datalist.appendChild(option);
    });
  </script>
<script type="text/javascript">
  var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
  (function(){
    var s1=document.createElement("script"),
        s0=document.getElementsByTagName("script")[0];
    s1.async=true;
    s1.src='https://embed.tawk.to/68134ea200e88619103f49ca/1iq5mmahm';
    s1.charset='UTF-8';
    s1.setAttribute('crossorigin','*');
    s0.parentNode.insertBefore(s1,s0);
  })();
</script>
<button id="scrollTopBtn" class="hidden fixed bottom-6 right-6 z-50 p-3 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition">
  ‚Üë
</button>
<script>
  const scrollBtn = document.getElementById("scrollTopBtn");
  window.addEventListener("scroll", () => {
    scrollBtn.classList.toggle("hidden", window.scrollY < 300);
  });
  scrollBtn.addEventListener("click", () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>

<script type="module" id="firebase-script">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";
  import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-storage.js";
  
  const firebaseConfig = {
    apiKey: "AIzaSyCOo_Sa242sUuGyZD8jO8kk12V1aBX7wMA",
    authDomain: "quaerensclaims.firebaseapp.com",
    projectId: "quaerensclaims",
    storageBucket: "quaerensclaims.appspot.com",
    messagingSenderId: "57715464932",
    appId: "1:57715464932:web:a69a4949f36c2ad214eaf1",
    measurementId: "G-GRT3XKF4KS"
  };
  
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  
  const airlineEmails = {
  "Ryanair": "claims@ryanair.com",
  "easyJet": "customer.support@easyjet.com",
  "Lufthansa": "customer.relations@lufthansa.com",
  "Vueling": "atencion.clientes@vueling.com",
  "British Airways": "customer.relations@ba.com",
  "KLM": "mail@klm.nl",
  "Transavia": "servicecentre@transavia.com",
  "Air France": "mail.afklmplc@airfrance.fr",
  "Iberia": "clasica@iberia.es",
  "Jet2": "customer.service@jet2.com",
  "Wizz Air": "claim@wizzair.com",
  "TUI Airways": "aftertravel@tui.co.uk",
  "Norwegian": "complaints@norwegian.com",
  "Aer Lingus": "customerqueries@aerlingus.com",
  "Brussels Airlines": "claim@brusselsairlines.com",
  "Swiss International Air Lines": "contact@swiss.com",
  "Eurowings": "customercare@eurowings.com",
  "TAP Air Portugal": "customer@tap.pt",
  "Finnair": "feedback@finnair.com",
  "SAS Scandinavian Airlines": "customercare@sas.se",
  "Aegean Airlines": "customercare@aegeanair.com",
  "LOT Polish Airlines": "contact@lot.pl",
  "Air Malta": "customer.relations@airmalta.com",
  "Corendon Airlines": "info@corendon-airlines.com",
  "SunExpress": "customer.service@sunexpress.com",
  "Blue Air": "support@blueairweb.com",
  "Volotea": "support@volotea.com",
  "Lauda Europe": "assistance@laudamotion.com",
  "Wider√∏e": "info@wideroe.no",
  "Croatia Airlines": "contact@croatiaairlines.hr",
  "Alitalia (ITA Airways)": "customer.relations@itaspa.com",
  "Condor": "service@condor.com"
};

const airlineLogos = {
  "Ryanair": "images/logos/ryanair.png",
  "easyJet": "images/logos/easyjet.png",
  "Lufthansa": "images/logos/lufthansa.png",
  "Vueling": "images/logos/vueling.png",
  "British Airways": "images/logos/britishairways.png",
  "KLM": "images/logos/klm.png",
  "Transavia": "images/logos/transavia.png",
  "Air France": "images/logos/airfrance.png",
  "Iberia": "images/logos/iberia.png",
  "Jet2": "images/logos/jet2.png",
  "Wizz Air": "images/logos/wizzair.png",
  "TUI Airways": "images/logos/tuiairways.png",
  "Norwegian": "images/logos/norwegian.png",
  "Aer Lingus": "images/logos/aerlingus.png",
  "Brussels Airlines": "images/logos/brusselsairlines.png",
  "Swiss International Air Lines": "images/logos/swissinternationalairlines.png",
  "Eurowings": "images/logos/eurowings.png",
  "TAP Air Portugal": "images/logos/tapairportugal.png",
  "Finnair": "images/logos/finnair.png",
  "SAS Scandinavian Airlines": "images/logos/sasscandinavianairlines.png",
  "Aegean Airlines": "images/logos/aegeanairlines.png",
  "LOT Polish Airlines": "images/logos/lotpolishairlines.png",
  "Air Malta": "images/logos/airmalta.png",
  "Corendon Airlines": "images/logos/corendonairlines.png",
  "SunExpress": "images/logos/sunexpress.png",
  "Blue Air": "images/logos/blueair.png",
  "Volotea": "images/logos/volotea.png",
  "Lauda Europe": "images/logos/laudaeurope.png",
  "Wider√∏e": "images/logos/wideroe.png",
  "Croatia Airlines": "images/logos/croatiaairlines.png",
  "Alitalia (ITA Airways)": "images/logos/italiaitaairways.png",
  "Condor": "images/logos/condor.png"
};

document.getElementById("airline").addEventListener("input", function () {
  const airlineName = this.value;
  const logoPath = airlineLogos[airlineName];

  const previewContainer = document.getElementById("airlineLogoPreview");
  if (logoPath) {
    previewContainer.innerHTML = `<img src="${logoPath}" alt="${airlineName} Logo" class="mx-auto h-12 md:h-16 mt-2">`;
  } else {
    previewContainer.innerHTML = "";
  }
});

  document.getElementById("claim-letter-form").addEventListener("submit", async function (e) {
    e.preventDefault();
  
    const fullName = document.getElementById("fullName").value.trim();
    const flightNumber = document.getElementById("flightNumber").value.trim();
    const flightDate = document.getElementById("flightDate").value;
    const depAirport = document.getElementById("depAirport").value.trim();
    const arrAirport = document.getElementById("arrAirport").value.trim();
    const airline = document.getElementById("airline").value;
    const reason = document.getElementById("reason").value.trim();
    const language = document.getElementById("language").value;
    const email = document.getElementById("email").value.trim();
    const handleOption = document.getElementById("handleOption").value;
    const donation = document.getElementById("donation").value;
  
    if (!fullName || !flightNumber || !flightDate || !depAirport || !arrAirport || !email || !airline) {
      alert("Please fill in all required fields.");
      return;
    }
  
    const file = document.getElementById("fileUpload").files[0];
    let fileURL = "";
  
    if (file) {
      const storage = getStorage(app);
      const storageRef = ref(storage, `uploads/${Date.now()}-${file.name}`);
      const uploadSnapshot = await uploadBytes(storageRef, file);
      fileURL = await getDownloadURL(uploadSnapshot.ref);
    }
  
    const claimData = {
      fullName,
      flightNumber,
      flightDate,
      depAirport,
      arrAirport,
      airline,
      reason,
      language,
      email,
      handleOption,
      donation,
      fileURL,
      createdAt: serverTimestamp(),
      airlineEmail: airlineEmails[airline] || ""
    };
  
    try {
      await addDoc(collection(db, "flightClaimLetters"), claimData);
  
      if (handleOption === "pdf") {
        generatePDF(claimData);
      } else if (handleOption === "email") {
        await fetch("https://us-central1-quaerensclaims.cloudfunctions.net/sendClaimEmail", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(claimData)
        });
        alert("‚úÖ Your letter has been emailed!");
      } else if (handleOption === "quaerens") {
        alert("‚úÖ Your case has been submitted to Quaerens. We‚Äôll contact you shortly.");
      }
  
      document.getElementById("claim-letter-result").classList.remove("hidden");
    } catch (err) {
      console.error("Error saving claim:", err);
      alert("Something went wrong. Please try again.");
    }
  });
  
  function generatePDF(data) {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  const today = new Date().toLocaleDateString();
  const claimRef = `Q-${new Date().toISOString().slice(0, 10).replace(/-/g, "")}-${Math.random().toString(36).substring(2, 8).toUpperCase()}`;
  const airlineContact = `${data.airline}\n${data.airlineEmail ? "Email: " + data.airlineEmail : ""}`;
  const logoPath = airlineLogos[data.airline];

  // Add Logo if available
  function insertHeader() {
    if (logoPath) {
      const img = new Image();
      img.crossOrigin = "anonymous";
      img.src = logoPath;
      img.onload = () => {
        doc.addImage(img, "PNG", 150, 8, 40, 15);
        insertContent();
      };
      img.onerror = insertContent;
    } else {
      insertContent();
    }
  }

  function insertContent() {
    let y = 30;
    doc.setFont("helvetica", "normal");
    doc.setFontSize(12);
    doc.setTextColor(0, 0, 0);

    doc.text(today, 10, y);
    y += 8;
    doc.text(`Claim Reference: ${claimRef}`, 10, y);
    y += 10;

    const intro = `
To:
${airlineContact}

Subject: Compensation Request under EC Regulation 261/2004

Dear Sir/Madam,

I am writing to formally request compensation under EC Regulation 261/2004 for the following flight:
    `.trim();

    const details = `
- Passenger Name: ${data.fullName}
- Email: ${data.email}
- Flight Number: ${data.flightNumber}
- Date of Flight: ${data.flightDate}
- Departure Airport: ${data.depAirport}
- Arrival Airport: ${data.arrAirport}
- Airline: ${data.airline}
- Reason for Delay: ${data.reason || "Not specified"}

The flight was delayed by over 3 hours on arrival. According to EC Regulation 261/2004, I am entitled to compensation of up to ‚Ç¨600 depending on distance and circumstances.

Please process this claim within 14 days. I reserve the right to escalate the matter to enforcement bodies or legal proceedings if no resolution is provided.

Sincerely,

${data.fullName}
    `.trim();

    const lines = doc.splitTextToSize(`${intro}\n\n${details}`, 180);
    doc.text(lines, 10, y + 5);

    // Footer
    doc.setFontSize(10);
    doc.setTextColor(120);
    doc.text("This document was generated at no cost by Quaerens.co.uk.", 10, 290);

    // Save
    doc.save(`EC261-Claim-${data.flightNumber}.pdf`);
  }

  insertHeader();
}


  </script>
  
</body>
</html>
